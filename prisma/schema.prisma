datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  roleId    Int
  status    String   @default("active")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  role              Role               @relation(fields: [roleId], references: [id])
  organizer_profile Organizer_profile?
  events            Event[]
  sessions          Session[]
}

model Organizer_profile {
  id          Int      @id @default(autoincrement())
  userId      Int      @unique
  phone       String?
  description String?  @db.Text
  logo        String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  user User @relation(fields: [userId], references: [id])
}

model Event {
  id          Int      @id @default(autoincrement())
  userId      Int
  title       String
  description String?  @db.Text
  location    String?
  eventDate   DateTime
  startDate   DateTime
  endDate     DateTime
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  user             User             @relation(fields: [userId], references: [id])
  event_categories Event_category[]
}

model Categorie {
  id   Int    @id @default(autoincrement())
  name String

  event_categories Event_category[]
}

model Event_category {
  id         Int @id @default(autoincrement())
  eventId    Int
  categoryId Int

  event     Event     @relation(fields: [eventId], references: [id])
  categorie Categorie @relation(fields: [categoryId], references: [id])
}

model Role {
  id    Int    @id @default(autoincrement())
  role  String
  users User[]
}

model Session {
  id        Int      @id @default(autoincrement())
  userId    Int
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id])
}
